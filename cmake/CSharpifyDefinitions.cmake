option(RUNTIME_CORECLR "Use CoreCLR" 0)
option(RUNTIME_MONO "Use Mono" 0)
option(RUNTIME_NATIVEAOT "Use NativeAOT" 0)
option(DOTNET_ARCH "Target Arch" "")
option(DOTNET_PLATFORM "Target platform" "")
option(DOTNET_RUNTIME "Target runtime" "")

if(NOT DOTNET_ARCH)
  string(TOLOWER "${CMAKE_SYSTEM_PROCESSOR}" DOTNET_ARCH)
  string(REPLACE "amd" "x" DOTNET_ARCH "${DOTNET_ARCH}")
  set(DOTNET_ARCH "${DOTNET_ARCH}" CACHE STRING ".NET Arch" FORCE)
else(if NOT DEFINED CACHE{DOTNET_ARCH})
  set(DOTNET_ARCH "${DOTNET_ARCH}" CACHE STRING ".NET Arch")
endif()

if(NOT DOTNET_PLATFORM)
  if(CMAKE_HOST_APPLE)
    set(DOTNET_PLATFORM "osx" CACHE STRING ".NET Platform" FORCE)
  elseif(CMAKE_HOST_WIN32)
    set(DOTNET_PLATFORM "win" CACHE STRING ".NET Platform" FORCE)
  else()
    set(DOTNET_PLATFORM "linux" CACHE STRING ".NET Platform" FORCE)
  endif()
else(if NOT DEFINED CACHE{DOTNET_PLATFORM})
  set(DOTNET_PLATFORM "${DOTNET_PLATFORM}" CACHE STRING ".NET Platform")
endif()

if(DOTNET_PLATFORM STREQUAL "osx" OR DOTNET_PLATFORM STREQUAL "win" OR DOTNET_PLATFORM STREQUAL "linux")
  set(DEFAULT_RUNTIME "coreclr")
else()
  set(DEFAULT_RUNTIME "mono")
endif()

if(NOT RUNTIME_CORECLR AND NOT RUNTIME_MONO AND NOT RUNTIME_NATIVEAOT)
  if(NOT DOTNET_RUNTIME)
    set(DOTNET_RUNTIME "${DEFAULT_RUNTIME}" CACHE STRING ".NET Runtime" FORCE)
  else(if NOT DEFINED CACHE{DOTNET_RUNTIME})
    set(DOTNET_RUNTIME "${DOTNET_RUNTIME}" CACHE STRING ".NET Runtime")
  endif()
elseif(RUNTIME_MONO)
  set(DOTNET_RUNTIME "mono")
elseif(RUNTIME_CORECLR)
  set(DOTNET_RUNTIME "coreclr")
elseif(RUNTIME_NATIVEAOT)
  set(DOTNET_RUNTIME "nativeaot")
endif()


if (DOTNET_RUNTIME STREQUAL "coreclr")
  set(RUNTIME_CORECLR 1)
  set(runtimesuffix "")
elseif(DOTNET_RUNTIME STREQUAL "mono")
  set(RUNTIME_MONO 1)
  set(runtimesuffix "Mono.")
else()
  set(RUNTIME_NATIVEAOT 1)
  set(runtimesuffix "NativeAOT.")
endif()

